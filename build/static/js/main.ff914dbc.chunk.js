(this.webpackJsonpbaza_pytan_react=this.webpackJsonpbaza_pytan_react||[]).push([[0],{48:function(e,t,a){e.exports=a(76)},53:function(e,t,a){},75:function(e,t,a){e.exports=a.p+"static/media/_redirects.67ec2587.bin"},76:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(24),o=a.n(i),r=(a(53),a(5)),c=a(6),l=a(8),u=a(9),m=a(3),d=a(42),p=a(10),h=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={value:"",showClose:!1},e.onChange=function(t){var a=t.target.value.split(",").map((function(e){return e.trim()}));e.props.onChange(a),t.target.value.length>1?e.setState({value:t.target.value,showClose:!0}):e.setState({value:t.target.value,showClose:!1})},e.resetFilter=function(){e.setState({value:"",showClose:!1}),e.props.onChange([])},e}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"filter"},s.a.createElement("div",{className:"filter__text"},s.a.createElement(d.a,{className:"filter__icon"})," ",s.a.createElement("span",{className:"filter__text--txt"},"Szukaj! ")),s.a.createElement("input",{className:"filter__input js--filter-input",type:"text",placeholder:this.props.placeholder,onChange:this.onChange,value:this.state.value}),this.state.showClose?s.a.createElement(p.b,{className:"filter__close",onClick:this.resetFilter}):null)}}]),a}(n.Component),f=function(e){var t="btn ";return e.className&&(t+=e.className+" "),e.type&&(t+="btn--"+e.type+" "),e.types&&e.types.forEach((function(e){t+="btn--"+e+" "})),s.a.createElement("button",{onClick:e.onClick,className:t},e.children)},E=function(e){var t=s.a.createElement(n.Fragment,null,s.a.createElement("button",{className:"question-card__delete-btn",onClick:e.onDelete},s.a.createElement(p.c,{className:"question-card__delete-icon"})),s.a.createElement("button",{className:"question-card__edit-btn",onClick:e.onEdit},s.a.createElement(p.e,null))),a=null,i=null;e.author&&(a=s.a.createElement("h3",{className:"question-card__author"},"Autor:\xa0\xa0",e.author.firstName+" "+e.author.lastName+" ("+e.author.email+")"),i=s.a.createElement("div",{className:"question-card__confirm-btns"},s.a.createElement("button",{className:"question-card__confirm-btn",onClick:e.onConfirm},"Zatwierd\u017a"),s.a.createElement("button",{onClick:e.onDiscard,className:"question-card__confirm-btn question-card__confirm-btn--delete"},"Odrzu\u0107")));var o=null;return e.wasDiscarded&&(o=s.a.createElement("div",{className:"question-card__discarded"},"Odrzucono")),s.a.createElement("div",{className:"question-card"},a,s.a.createElement("h2",{className:"question-card__title ".concat(e.wasDiscarded?"question-card__title--discarded":"")},e.number?e.number+". ":null,e.question.length?e.question[0].toUpperCase()+e.question.slice(1):"---"),s.a.createElement("p",{className:"question-card__answer"},e.answer),s.a.createElement("div",{className:"question-card__key-words-title"},"S\u0142owa kluczowe:"),s.a.createElement("div",{className:"question-card__key-words"},e.keyWords&&e.keyWords.map&&e.keyWords.length>0?e.keyWords.map((function(e,t){return!e||e.length<1?null:s.a.createElement("div",{key:e+""+t,className:"question-card__key-word"},e)})):s.a.createElement("div",{className:"question-card__key-word--default"},"Brak s\u0142\xf3w kluczowych")),e.isDeletable?t:null,i,o)},_=function(){return s.a.createElement("div",{className:"lds-ring"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null))},g=a(15),y=a(7),b=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={question:"",answer:"",keyWordsString:"",keyWords:[]},e.setInputsFromProps=function(){e.setState({question:e.props.question||"",answer:e.props.answer||"",keyWordsString:e.props.keyWords&&e.props.keyWords.join?e.props.keyWords.join(","):"",keyWords:e.props.keyWords||[]})},e.onInputChange=function(t,a){e.setState(Object(g.a)({},a,t.target.value))},e.onKeyWordsChange=function(t){var a=t.target.value.split(",").map((function(e){return e.trim()}));e.setState({keyWordsString:t.target.value,keyWords:a})},e.onSubmit=function(t){if(t.preventDefault(),e.props.user){var a={question:e.state.question,answer:e.state.answer,keyWords:e.state.keyWords};e.props.onSubmit(a)}else console.error("Cant send question if not logged in!")},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setInputsFromProps()}},{key:"componentDidUpdate",value:function(){this.state.question||this.state.answer||this.state.keyWordsString||!(this.props.question||this.props.answer||this.props.keyWords)||this.setInputsFromProps()}},{key:"render",value:function(){var e=this,t=null;return this.props.author&&(t=s.a.createElement("h3",{className:"question-card__author question-card__author--big"},"Autor:\xa0\xa0",this.props.author.firstName+" "+this.props.author.lastName+" ("+this.props.author.email+")")),s.a.createElement("form",{className:"question-card",onSubmit:this.onSubmit},t,s.a.createElement("textarea",{className:"question-card__title question-card__title--input",placeholder:"Tre\u015b\u0107 pytania...",value:this.state.question,onChange:function(t){return e.onInputChange(t,"question")},required:!0}),s.a.createElement("textarea",{className:"question-card__answer question-card__answer--input",placeholder:"Tre\u015b\u0107 odpowiedzi...",value:this.state.answer,onChange:function(t){return e.onInputChange(t,"answer")},required:!0}),s.a.createElement("div",{className:"question-card__key-words-title"},"S\u0142owa kluczowe:"),s.a.createElement("textarea",{className:"question-card__key-words question-card__key-words--input",placeholder:"S\u0142owa kluczowe oddzielone przecinkami",onChange:this.onKeyWordsChange,value:this.state.keyWordsString}),s.a.createElement("button",{className:"question-card__btn",type:"submit"},"Wy\u015blij!"),s.a.createElement("button",{className:"question-card__delete-btn",onClick:this.props.onClose},s.a.createElement("div",null)))}}]),a}(n.Component),N=Object(y.b)((function(e){return{user:e.auth.user}}),{})(b),v=function(e){var t=s.a.createElement("span",{className:"u-centered"},s.a.createElement(_,null)),a=s.a.createElement("h3",{className:"u-centered"},"Nie znaleziono \u017cadnych pyta\u0144.");return"private"===e.type&&(a=s.a.createElement("h3",{className:"u-centered",style:{width:"90%",maxWidth:"90rem"}},"Nie znaleziono \u017cadnych pyta\u0144. Je\u015bli doda\u0142e\u015b/a\u015b pytanie, i nie mo\u017cesz go znale\u017a\u0107, prawdopodobnie zosta\u0142o usuni\u0119te lub zatwierdzone przez recenzenta."," ")),s.a.createElement("div",{className:"questions-container"},e.showLoader?t:0===e.questions.length?a:e.questions.map((function(t,a){return e.editedPosition===a?s.a.createElement(N,{question:t.question,answer:t.answer,keyWords:t.keyWords,key:t.id,onClose:e.methods.onClose,onSubmit:function(a){return e.methods.onSubmit(a,t.id)},author:e.extended?t.creator:null}):e.extended?t.wasDiscarded?null:s.a.createElement(E,{key:t.id,id:t.id,question:t.question,answer:t.answer,keyWords:t.keyWords,onDelete:function(){return e.onDeleteQuestion(t.id)},onEdit:function(){return e.onEditQuestion(a)},onConfirm:function(){return e.onConfirmQuestion(t.id)},onDiscard:function(){return e.onDiscardQuestion(t.id)},isDeletable:!1!==t.isDeletable,author:t.creator,number:t.number}):s.a.createElement(E,{key:t.id,id:t.id,question:t.question,answer:t.answer,keyWords:t.keyWords,onDelete:function(){return e.onDeleteQuestion(t.id)},onEdit:function(){return e.onEditQuestion(a)},isDeletable:!1!==t.isDeletable,wasDiscarded:t.wasDiscarded,number:t.number})})))},w=a(26),k=a.n(w);a(58),a(61),a(63);k.a.initializeApp({apiKey:"AIzaSyAwlN24oXYrAEceYn1XB3fpAHi5cEFqzNw",authDomain:"baza-pytan.firebaseapp.com",databaseURL:"https://baza-pytan.firebaseio.com",projectId:"baza-pytan",storageBucket:"baza-pytan.appspot.com",messagingSenderId:"361765519780",appId:"1:361765519780:web:18b81c5a7f7f3257d6c131"});var C=k.a.database(),O=k.a.auth(),S=k.a.functions(),j=function(e,t){return{type:"GET_ERRORS",payload:{msg:e,status:t}}},A=a(16),U=a.n(A),Q=a(44),I={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},D=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).defaultQuestionsPerPage=4,e.state={filterInput:[],addingQuestion:!1,isFiltering:!0,numOfQuestions:e.defaultQuestionsPerPage,type:"public",editedPosition:null,editMode:!1,showModal:!1,deletedId:null},e.onShowModal=function(t){e.setState({showModal:!0,deletedId:t})},e.onCloseModal=function(){e.setState({showModal:!1,deletedId:null})},e.loadQuestions=function(t){switch(t){case"private":if(!e.props.user)return void e.props.history.push("/");e.props.user.uid&&e.props.fetchMyReviewQuestions(e.props.user.uid);break;case"review":if(!e.props.user||!e.props.isPublisher)return void e.props.history.push("/");e.props.fetchAllReviewQuestions();break;default:e.props.fetchPublicQuestions()}e.resetEditingQuestion(),e.resetQuestionsNum()},e.toggleEditMode=function(){e.setState({editMode:!e.state.editMode})},e.onAddingQuestion=function(){e.setState({addingQuestion:!0})},e.onEndAddQuestion=function(){e.setState({addingQuestion:!1})},e.onAddedQuestion=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.props.user&&e.props.user.uid&&("private"===e.state.type?a?e.props.updateQuestion(a,"reviewQuestions",Object(m.a)({},t,{wasDiscarded:!1})):e.props.createReviewQuestion(t,e.props.user):"review"===e.state.type?e.props.updateQuestion(a,"reviewQuestions",t):a?e.props.updateQuestion(a,"publicQuestions",t):e.props.createPublicQuestion(t,e.props.user),e.onEndAddQuestion(),e.resetEditingQuestion())},e.onDeleteQuestion=function(t){switch(console.log(t),e.state.type){case"private":e.props.deleteQuestion(t,"reviewQuestions");break;case"review":if(!e.props.isPublisher)return;e.props.deleteQuestion(t,"reviewQuestions");break;default:if(!e.props.isPublisher)return;e.props.deleteQuestion(t,"publicQuestions")}e.onCloseModal()},e.onEditedQuestion=function(t){e.setState({editedPosition:t})},e.resetEditingQuestion=function(){e.setState({editedPosition:null})},e.onConfirmQuestion=function(t){if(e.props.user){var a=e.props.questions.find((function(e){return e.id===t}));e.props.deleteQuestion(t,"reviewQuestions"),e.props.createPublicQuestion(a,e.props.user,!1),e.onEndAddQuestion(),e.resetEditingQuestion()}else console.error("Cannot add public question if not a reviewer!")},e.onDiscardQuestion=function(t){e.props.user?(e.props.updateQuestion(t,"reviewQuestions",{wasDiscarded:!0}),e.onEndAddQuestion(),e.resetEditingQuestion()):console.error("Cannot add public question if not a reviewer!")},e.loadMoreQuestions=function(){var t=e.state.numOfQuestions;e.setState({numOfQuestions:t+3})},e.resetQuestionsNum=function(){e.state.numOfQuestions!==e.defaultQuestionsPerPage&&e.setState({numOfQuestions:e.defaultQuestionsPerPage})},e.onFilterChange=function(t){t.length&&t[0].length>0?e.setState({filterInput:t,isFiltering:!0,numOfQuestions:e.defaultQuestionsPerPage}):e.setState({filterInput:t,isFiltering:!1,numOfQuestions:e.defaultQuestionsPerPage})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadQuestions(this.props.type),this.props.type&&this.setState({type:this.props.type})}},{key:"componentDidUpdate",value:function(){this.props.type!==this.state.type?(this.setState({type:this.props.type,isFiltering:this.props.isFetching}),this.loadQuestions(this.props.type),this.resetEditingQuestion()):this.state.isFiltering!==this.props.isFetching&&this.setState({isFiltering:this.props.isFetching})}},{key:"render",value:function(){var e=this,t=this.props.questions.filter((function(t){if(0===e.state.filterInput.length)return!0;if(e.state.filterInput[0].length<1)return!0;var a=!1;return t.keyWords&&t.keyWords.forEach&&t.keyWords.forEach((function(t){e.state.filterInput.forEach((function(e){t.toLowerCase().includes(e.toLowerCase())&&e.length>0&&(a=!0)}))})),e.state.filterInput.forEach((function(e){t.question&&t.question.toLowerCase().includes(e.toLowerCase())&&e.length>0&&(a=!0),t.number&&e.toLowerCase()===t.number+""&&(a=!0)})),a})),a=null;this.state.addingQuestion&&(a=s.a.createElement(N,{onClose:this.onEndAddQuestion,onSubmit:this.onAddedQuestion})),this.state.editMode&&(t=t.map((function(e){return Object(m.a)({},e,{isDeletable:!0})})));var i=s.a.createElement(v,{questions:t,onDeleteQuestion:this.onShowModal,onEditQuestion:this.onEditedQuestion,showLoader:this.state.isFiltering,extended:"review"===this.props.type,onConfirmQuestion:"review"===this.props.type?this.onConfirmQuestion:function(){console.error("Cant confirm question if not in reviews mode")},onDiscardQuestion:"review"===this.props.type?this.onDiscardQuestion:function(){console.error("Cant discard question if not in reviews mode")},type:this.props.type});(this.state.editedPosition||0===this.state.editedPosition)&&(i=s.a.createElement(v,{questions:t,onDeleteQuestion:this.onShowModal,onEditQuestion:this.onEditedQuestion,showLoader:this.state.isFiltering,editedPosition:this.state.editedPosition,methods:{onClose:this.resetEditingQuestion,onSubmit:this.onAddedQuestion},extended:"review"===this.props.type,onConfirmQuestion:"review"===this.props.type?this.onConfirmQuestion:function(){console.error("Cant confirm question if not in reviews mode")},onDiscardQuestion:"review"===this.props.type?this.onDiscardQuestion:function(){console.error("Cant discard question if not in reviews mode")},type:this.props.type}));var o=s.a.createElement(f,{onClick:this.state.numOfQuestions>=t.length?function(){}:this.loadMoreQuestions,className:this.state.numOfQuestions>=t.length?"btn--grey":""},"Za\u0142aduj wi\u0119cej pyta\u0144");return"private"===this.state.type?o=s.a.createElement("div",{className:"questions-box__btns"},s.a.createElement(f,{onClick:this.onAddingQuestion},"Dodaj pytanie"),s.a.createElement(f,{onClick:this.state.numOfQuestions>=t.length?function(){}:this.loadMoreQuestions,className:this.state.numOfQuestions>=t.length?"btn--grey":""},"Za\u0142aduj wi\u0119cej pyta\u0144")):"review"!==this.state.type&&this.props.isPublisher&&(o=s.a.createElement("div",{className:"questions-box__btns"},s.a.createElement(f,{onClick:function(){return e.toggleEditMode()}},this.state.editMode?"Wy\u0142\u0105cz ":"W\u0142\u0105cz ","tryb edycji"),s.a.createElement(f,{onClick:this.onAddingQuestion},"Dodaj pytanie"),s.a.createElement(f,{onClick:this.state.numOfQuestions>=t.length?function(){}:this.loadMoreQuestions,className:this.state.numOfQuestions>=t.length?"btn--grey":""},"Za\u0142aduj wi\u0119cej pyta\u0144"))),t&&t.length>this.state.numOfQuestions&&t.splice(this.state.numOfQuestions),s.a.createElement(n.Fragment,null,s.a.createElement(h,{placeholder:"Szukaj pyta\u0144 po s\u0142owach kluczowych...",onChange:this.onFilterChange}),i,a,o,s.a.createElement(U.a,{isOpen:this.state.showModal,style:I,contentLabel:"Example Modal",overlayClassName:"modal__overlay",onRequestClose:this.onCloseModal},s.a.createElement("div",{className:"modal__window"},s.a.createElement("div",{className:"modal__icon-box"},s.a.createElement(Q.a,{className:"modal__icon"})),s.a.createElement("h2",{className:"modal__msg"},"Czy na pewno chcesz usun\u0105\u0107 pytanie?"),s.a.createElement("h3",{className:"modal__msg--small"},"Tej operacji nie mo\u017cna cofn\u0105\u0107."),s.a.createElement("div",{className:"modal__btns"},s.a.createElement(f,{types:["confirm","short"],onClick:function(){return e.onDeleteQuestion(e.state.deletedId)}},"Tak"),s.a.createElement(f,{types:["delete","short"],onClick:this.onCloseModal},"Anuluj")))))}}]),a}(n.Component),M=Object(y.b)((function(e){return{questions:e.questions.items,isAuthenticated:e.auth.isAuthenticated,user:e.auth.user,isPublisher:e.auth.isPublisher,isAdmin:e.auth.isAdmin,isFetching:e.questions.isFetching}}),{fetchPublicQuestions:function(){return function(e){e({type:"QUESTIONS_LOADING"}),C.ref("publicQuestions").orderByChild("createdAt").once("value").then((function(e){return e.val()})).then((function(t){var a=[],n=0;for(var s in t)a.push(Object(m.a)({},t[s],{id:s,isDeletable:!1,number:++n}));e({type:"FETCH_QUESTIONS",payload:a})})).catch((function(t){e(j(t.message,t.code)),e({type:"QUESTION_ERROR"})}))}},deleteQuestion:function(e,t){return function(a){a({type:"QUESTIONS_LOADING"}),C.ref("".concat(t,"/").concat(e)).remove((function(t){a({type:"DELETE_QUESTION",payload:e})})).catch((function(e){a(j(e.message,e.code)),a({type:"QUESTION_ERROR"})}))}},fetchMyReviewQuestions:function(e){return function(t){t({type:"QUESTIONS_LOADING"}),e?C.ref("reviewQuestions").orderByChild("uid").equalTo(e).once("value").then((function(e){return e.val()})).then((function(e){var a=[];for(var n in e)a.push(Object(m.a)({},e[n],{id:n,isDeletable:!0}));t({type:"FETCH_QUESTIONS",payload:a})})).catch((function(e){t(j(e.message,e.code)),t({type:"QUESTION_ERROR"})})):console.error("Getting questions without beeing authenticated!")}},fetchAllReviewQuestions:function(){return function(e){e({type:"QUESTIONS_LOADING"}),C.ref("reviewQuestions").once("value").then((function(e){return e.val()})).then((function(t){var a=[];for(var n in t)a.push(Object(m.a)({},t[n],{id:n,isDeletable:!0}));e({type:"FETCH_QUESTIONS",payload:a})})).catch((function(t){e(j(t.message,t.code)),e({type:"QUESTION_ERROR"})}))}},createPublicQuestion:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(n){e.id||console.error("CANT MAKE QUESTION PUBLIC WITHOUT ITS ID");var s=C.ref("publicQuestions").push();s.set({question:e.question,answer:e.answer,keyWords:e.keyWords||[],reviewer:t.uid||"brak danych",author:e.uid||"brak danych",createdAt:Date.now()}).then((function(t){var i=Object(m.a)({},e);i.id=s.key,n(a?{type:"NEW_PUBLIC_QUESTION",payload:i}:{type:"NEW_PUBLIC_QUESTION"})})).catch((function(e){n(j(e.message,e.code)),n({type:"QUESTION_ERROR"})}))}},createReviewQuestion:function(e,t){return function(a){a({type:"QUESTIONS_LOADING"});var n=C.ref("reviewQuestions").push();n.set({question:e.question,answer:e.answer,keyWords:e.keyWords||[],uid:t.uid,creator:{firstName:t.firstName||"Brak informacji",lastName:t.lastName||"Brak informacji",email:t.email||"Nie podano"},createdAt:Date.now()}).then((function(t){var s=Object(m.a)({},e);s.id=n.key,a({type:"NEW_PRIVATE_QUESTION",payload:s})})).catch((function(e){a(j(e.message,e.code)),a({type:"QUESTION_ERROR"})}))}},updateQuestion:function(e,t,a){return function(n){C.ref("".concat(t,"/").concat(e)).update(Object(m.a)({},a)).then((function(){n({type:"UPDATE_QUESTION",payload:{id:e,question:a}})})).catch((function(e){n(j(e.message,e.code)),n({type:"QUESTION_ERROR"})}))}}})(D),P=function(){return s.a.createElement("footer",{className:"footer"},s.a.createElement("a",{href:"http://radzimin.ski",className:"footer__link",target:"_blank",rel:"noopener noreferrer"},"\xa9 Jan Radzimi\u0144ski 2020"))},R=a(17),q=a(11),L=function(e){return function(t){e?e.delete().then((function(){C.ref("users/".concat(e.uid)).remove().then((function(){t({type:"LOGOUT_SUCCESS"})}))})).catch((function(e){t(j(e.message,e.code))})):t(j("Such user does not exist",400))}},z=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={value:""},e.onChange=function(t){e.setState({value:t.target.value}),e.props.onChange(t)},e}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"login__input-box ".concat(this.props.classType?"login__input-box--"+this.props.classType:"")},s.a.createElement("input",{type:this.props.type,className:"login__input",id:this.props.id,placeholder:this.props.placeholder,onChange:this.onChange,value:this.state.value,name:this.props.id,required:this.props.required}),s.a.createElement("label",{htmlFor:this.props.id,className:"login__label"},this.props.label),this.props.icon)}}]),a}(n.Component),T=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={register:!1,email:"",password:"",firstName:"",lastName:"",city:""},e.onChangeFormType=function(t){e.setState({register:!0===t})},e.onSubmit=function(t){t.preventDefault(),e.state.register?e.props.registerUser({email:e.state.email,password:e.state.password,firstName:e.state.firstName,lastName:e.state.lastName,city:e.state.city}):e.props.loginUser(e.state.email,e.state.password)},e.onInputChange=function(t){t.target&&e.setState(Object(g.a)({},t.target.name,t.target.value))},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.props.isAuthenticated&&this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=s.a.createElement("div",{className:"login__btns"},s.a.createElement("button",{type:"button",className:"login__btn",onClick:function(){return e.onChangeFormType(!1)}},"Zaloguj si\u0119"),s.a.createElement("button",{type:"button",className:"login__btn login__btn--grey",onClick:function(){return e.onChangeFormType(!0)}},"Zarejestruj si\u0119")),a="Login";this.state.register&&(t=s.a.createElement("div",{className:"login__btns"},s.a.createElement("button",{type:"button",className:"login__btn  login__btn--grey",onClick:function(){return e.onChangeFormType(!1)}},"Zaloguj si\u0119"),s.a.createElement("button",{type:"button",className:"login__btn",onClick:function(){return e.onChangeFormType(!0)}},"Zarejestruj si\u0119")),a="Rejestracja");var i=s.a.createElement(n.Fragment,null,s.a.createElement(z,{type:"text",id:"email",placeholder:"Email",onChange:this.onInputChange,label:"Email:",icon:s.a.createElement(q.c,{className:"login__icon"}),required:!0}),s.a.createElement(z,{type:"password",id:"password",placeholder:"Has\u0142o",onChange:this.onInputChange,label:"Has\u0142o:",icon:s.a.createElement(q.b,{className:"login__icon"}),required:!0,classType:"last"}));this.state.register&&(i=s.a.createElement(n.Fragment,null,s.a.createElement(z,{type:"text",id:"firstName",placeholder:"Imi\u0119",onChange:this.onInputChange,label:"Imi\u0119:",icon:s.a.createElement(q.c,{className:"login__icon"}),required:!0}),s.a.createElement(z,{type:"text",id:"lastName",placeholder:"Nazwisko",onChange:this.onInputChange,label:"Nazwisko:",icon:s.a.createElement(q.c,{className:"login__icon"}),required:!0}),s.a.createElement(z,{type:"text",id:"email",placeholder:"Email",onChange:this.onInputChange,label:"Email:",icon:s.a.createElement(p.d,{className:"login__icon"}),required:!0}),s.a.createElement(z,{type:"password",id:"password",placeholder:"Has\u0142o",onChange:this.onInputChange,label:"Has\u0142o:",icon:s.a.createElement(q.b,{className:"login__icon"}),required:!0}),s.a.createElement(z,{type:"text",id:"city",placeholder:"Miejscowo\u015b\u0107",onChange:this.onInputChange,label:"Miejscowo\u015b\u0107 zamieszkania:",icon:s.a.createElement(p.d,{className:"login__icon"}),classType:"last"})));var o=s.a.createElement("div",{className:"u-centered"},s.a.createElement(_,null));return this.props.isLoading||(o=this.props.errorMsg.length?s.a.createElement("h3",{className:"login__msg"},this.props.errorMsg):null),s.a.createElement("form",{className:"login",onSubmit:this.onSubmit},t,s.a.createElement("h2",{className:"login__title"},a),i,o,s.a.createElement("button",{type:"submit",className:"btn btn--full"},"Wy\u015blij"))}}]),a}(n.Component),x=Object(y.b)((function(e){return{isLoading:e.auth.isLoading,isAuthenticated:e.auth.isAuthenticated,errorMsg:e.error.msg}}),{loginUser:function(e,t){return function(a){a({type:"USER_LOADING"}),O.signInWithEmailAndPassword(e,t).then((function(e){a({type:"LOGIN_SUCCESS"})})).catch((function(e){a(j(e.message,e.code)),a({type:"LOGIN_FAIL"})}))}},registerUser:function(e){return function(t){t({type:"USER_LOADING"}),O.createUserWithEmailAndPassword(e.email,e.password).then((function(e){return e.user})).then((function(a){C.ref("users/".concat(a.uid)).set({firstName:e.firstName,lastName:e.lastName,email:a.email,city:e.city,isPublisher:!1,isAdmin:!1}),t({type:"REGISTER_SUCCESS"})})).catch((function(e){t(j(e.message,e.code)),t({type:"REGISTER_FAIL"})}))}}})(T),F=a(18),W=a(22),G=Object(R.f)(Object(y.b)((function(e){return{firstName:e.auth.user.firstName,lastName:e.auth.user.lastName,isPublisher:e.auth.isPublisher,isAdmin:e.auth.isAdmin}}),{logOut:function(){return function(e){e({type:"USER_LOADING"}),O.signOut().then((function(){e({type:"LOGOUT_SUCCESS"})})).catch((function(t){e(j(t.message,t.code)),e({type:"AUTH_ERROR"})}))}}})((function(e){return window.innerWidth<800?s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"user-menu",onClick:e.onClick},s.a.createElement("ul",{className:"user-menu__list"},s.a.createElement("li",{className:"user-menu__link"},e.firstName," ",e.lastName),s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.onClick(),e.history.push("/")}},s.a.createElement(F.c,{className:"user-menu__icon"}),"Wszystkie pytania"),s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.onClick(),e.history.push("/prywatne")}},s.a.createElement(F.c,{className:"user-menu__icon"}),"Moje pytania"),e.isPublisher?s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.onClick(),e.history.push("/recenzje")}},s.a.createElement(F.c,{className:"user-menu__icon"}),"Pytania do recenzji"):null,e.isAdmin?s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.onClick(),e.history.push("/admin")}},s.a.createElement(F.c,{className:"user-menu__icon"}),"Admin"):null,s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.onClick(),e.history.push("/account")}},s.a.createElement(p.a,{className:"user-menu__icon"}),"Twoje konto"),s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.onClick(),e.history.push("/change")}},s.a.createElement(p.e,{className:"user-menu__icon"}),"Zmie\u0144 has\u0142o"),s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.logOut(),e.onClick(),e.history.push("/")}},s.a.createElement(q.a,{className:"user-menu__icon"})," Wyloguj si\u0119")))):s.a.createElement("div",{className:"user-menu",onClick:e.onClick},s.a.createElement("ul",{className:"user-menu__list"},s.a.createElement("li",{className:"user-menu__link"},e.firstName," ",e.lastName),s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.onClick(),e.history.push("/account")}},s.a.createElement(p.a,{className:"user-menu__icon"}),"Twoje konto"),s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.onClick(),e.history.push("/change")}},s.a.createElement(p.e,{className:"user-menu__icon"}),"Zmie\u0144 has\u0142o"),s.a.createElement("li",{className:"user-menu__link",onClick:function(){e.logOut(),e.onClick(),e.history.push("/")}},s.a.createElement(q.a,{className:"user-menu__icon"})," Wyloguj si\u0119")))}))),H=Object(R.f)((function(e){return window.innerWidth<800?s.a.createElement(n.Fragment,null):s.a.createElement("div",{className:"user-nav-bar"},s.a.createElement("ul",{className:"user-nav-bar__list"},s.a.createElement("li",{className:"user-nav-bar__link ".concat("/"===e.history.location.pathname?"user-nav-bar__link--active":null),onClick:function(){return e.history.push("/")}},"Wszystkie pytania"),s.a.createElement("li",{className:"user-nav-bar__link ".concat("/prywatne"===e.history.location.pathname?"user-nav-bar__link--active":null),onClick:function(){return e.history.push("/prywatne")}},"Moje pytania"),e.isPublisher||e.isAdmin?s.a.createElement("li",{className:"user-nav-bar__link ".concat("/recenzje"===e.history.location.pathname?"user-nav-bar__link--active":null),onClick:function(){return e.history.push("/recenzje")}},"Pytania do recenzji"):null,e.isAdmin?s.a.createElement("li",{className:"user-nav-bar__link ".concat("/admin"===e.history.location.pathname?"user-nav-bar__link--active":null),onClick:function(){return e.history.push("/admin")}},"Admin"):null))})),B=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={icon:!1,showUserMenu:!1,sticked:!1},e.changeIcon=function(){e.setState({icon:!e.state.icon})},e.showUserMenu=function(){e.setState({showUserMenu:!0})},e.hideUserMenu=function(){e.setState({showUserMenu:!1})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=null;this.state.showUserMenu&&(t=s.a.createElement(G,{onClick:function(){return e.hideUserMenu()}}));var a=s.a.createElement(W.b,{to:"/login",style:{textDecoration:"none"}},s.a.createElement("button",{className:"btn btn--full btn--small"},"Zaloguj si\u0119"));return this.props.isAuth&&(a=s.a.createElement("div",{className:"nav-bar__user"},s.a.createElement(H,{isAdmin:this.props.isAdmin,isPublisher:this.props.isPublisher}),s.a.createElement("button",{className:"nav-bar__login-btn",onMouseEnter:function(){return e.changeIcon()},onMouseLeave:function(){return e.changeIcon()},onClick:this.state.showUserMenu?this.hideUserMenu:this.showUserMenu},this.state.icon?s.a.createElement(q.d,{className:"nav-bar__login-icon"}):s.a.createElement(q.c,{className:"nav-bar__login-icon"}),t))),s.a.createElement(n.Fragment,null,s.a.createElement("header",{className:"nav-bar "+(this.state.sticked?"nav-bar--sticked":"")},s.a.createElement(W.b,{to:"/",style:{textDecoration:"none"}},s.a.createElement("div",{className:"logo"},s.a.createElement("div",{className:"logo__img"},s.a.createElement(F.c,{className:"logo__icon"})),s.a.createElement("div",{className:"logo__text"},"Baza Pyta\u0144"))),a),this.state.showUserMenu?s.a.createElement("div",{className:"modal-user",onClick:this.hideUserMenu}):null)}}]),a}(n.Component),Z=Object(y.b)((function(e){return{isAuth:e.auth.isAuthenticated,isAdmin:e.auth.isAdmin,isPublisher:e.auth.isPublisher}}),{})(B),J=a(36),K={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},V=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={editMode:!1,email:"",firstName:"",lastName:"",city:"",showModal:!1,showMessage:!1,modalMessage:"Czy na pewno chcesz USUN\u0104\u0106 swoje konto? Tej akcji nie da si\u0119 cofn\u0105\u0107!",edited:!1},e.saveChanges=function(){e.props.updateUser(e.props.user,{email:e.state.email,city:e.state.city,firstName:e.state.firstName,lastName:e.state.lastName}),e.setState({editMode:!1,edited:!0})},e.toggleModal=function(t){e.setState({showModal:t})},e.toggleEditMode=function(t){e.setState({editMode:t})},e.deleteUser=function(){e.props.deleteUser(e.props.user),e.toggleModal(!1),e.showMessage(!0)},e.showMessage=function(t){e.setState({showMessage:!0})},e.onInputChange=function(t){e.setState(Object(g.a)({},t.target.name,t.target.value.trim()))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.isAuthenticated||this.props.history.push("/"),!this.props.user||this.props.user.email===this.state.email||this.state.editMode||this.state.edited||this.setState(Object(m.a)({},this.props.user))}},{key:"componentDidUpdate",value:function(){this.props.isAuthenticated||this.props.history.push("/"),!this.props.user||this.props.user.email===this.state.email||this.state.editMode||this.state.edited||this.setState(Object(m.a)({},this.props.user))}},{key:"render",value:function(){var e=this;return this.props.isAuthenticated?this.state.editMode?s.a.createElement(n.Fragment,null,s.a.createElement("h1",{className:"heading-primary"},"Twoje konto"),s.a.createElement("div",{className:"account-info__box"},s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Email:")," ",s.a.createElement("input",{className:"account-info__input",type:"text",name:"email",value:this.state.email,onChange:this.onInputChange})),s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Imi\u0119:")," ",s.a.createElement("input",{className:"account-info__input",type:"text",name:"firstName",value:this.state.firstName,onChange:this.onInputChange})),s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Nazwisko:")," ",s.a.createElement("input",{className:"account-info__input",type:"text",name:"lastName",value:this.state.lastName,onChange:this.onInputChange})),s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Miejsce zamieszkania:")," ",s.a.createElement("input",{className:"account-info__input",type:"text",name:"city",value:this.state.city,onChange:this.onInputChange})),s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Status:")," ",this.props.isAdmin?"Admin":this.props.isPublisher?"Recenzent":"U\u017cytkownik"),s.a.createElement("div",{className:"account-info__btns"},s.a.createElement(f,{type:"short",onClick:function(){return e.saveChanges()}},s.a.createElement(p.e,{className:"account-info__btn-icon"}),"\u2003\u2003 Zapisz zmiany"),s.a.createElement(f,{types:["short","delete"],onClick:function(){return e.toggleEditMode(!1)}},s.a.createElement(J.a,{className:"account-info__btn-icon"}),"\u2003\u2003 Anuluj"))),s.a.createElement("div",{className:"login__msg"},this.state.showMessage&&this.props.msg.length?this.props.msg:null),s.a.createElement(U.a,{isOpen:this.state.showModal,style:K,contentLabel:"Example Modal",overlayClassName:"modal__overlay",onRequestClose:function(){return e.toggleModal(!1)}},s.a.createElement("div",{className:"modal__window"},s.a.createElement("h2",null,this.state.modalMessage),s.a.createElement("div",{className:"modal__btns"},s.a.createElement(f,{type:"short",onClick:this.deleteUser},"Tak"),s.a.createElement(f,{types:["delete","short"],onClick:function(){return e.toggleModal(!1)}},"Anuluj"))))):s.a.createElement(n.Fragment,null,s.a.createElement("h1",{className:"heading-primary"},"Twoje konto"),s.a.createElement("div",{className:"account-info__box"},s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Email:")," ",this.state.email),s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Imi\u0119:")," ",this.state.firstName),s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Nazwisko:")," ",this.state.lastName),s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Miejsce zamieszkania:")," ",this.state.city),s.a.createElement("div",{className:"account-info__field"},s.a.createElement("span",{className:"account-info__field-title"},"Status:")," ",this.props.isAdmin?"Admin":this.props.isPublisher?"Recenzent":"U\u017cytkownik"),s.a.createElement("div",{className:"account-info__btns"},s.a.createElement(f,{type:"short",onClick:function(){return e.toggleEditMode(!0)}},s.a.createElement(p.e,{className:"account-info__btn-icon"}),"\u2003\u2003 Edytuj dane"),s.a.createElement(f,{types:["short","delete"],onClick:function(){return e.toggleModal(!0)}},s.a.createElement(J.a,{className:"account-info__btn-icon"}),"\u2003\u2003 Usu\u0144 konto"))),s.a.createElement("div",{className:"login__msg"},this.state.showMessage&&this.props.msg.length?this.props.msg:null),s.a.createElement(U.a,{isOpen:this.state.showModal,style:K,contentLabel:"Example Modal",overlayClassName:"modal__overlay",onRequestClose:function(){return e.toggleModal(!1)}},s.a.createElement("div",{className:"modal__window"},s.a.createElement("h2",null,this.state.modalMessage),s.a.createElement("div",{className:"modal__btns"},s.a.createElement(f,{type:"short",onClick:this.deleteUser},"Tak"),s.a.createElement(f,{types:["delete","short"],onClick:function(){return e.toggleModal(!1)}},"Anuluj"))))):s.a.createElement(n.Fragment,null)}}]),a}(n.Component),X=Object(y.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user,isAdmin:e.auth.isAdmin,isPublisher:e.auth.isPublisher,msg:e.error.msg}}),{deleteUser:L,updateUser:function(e,t){return function(a){e?t.email!==e.email?e.updateEmail(t.email).then((function(){C.ref("users/".concat(e.uid)).update(Object(m.a)({},t)).then((function(){a({type:"USER_UPDATED",payload:t})})).catch((function(e){throw new Error(e.message,e.code)}))})).catch((function(e){a(j(e.message,e.code))})):C.ref("users/".concat(e.uid)).update(Object(m.a)({},t)).then((function(){a({type:"USER_UPDATED",payload:t})})).catch((function(e){a(j(e.message,e.code))})):a(j("Such user does not exist",400))}}})(V),Y={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};U.a.setAppElement("#root");var $=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).defaultUsersPerPage=5,e.state={users:[],numOfUsers:5,filterInput:[],isFiltering:!1,isLoading:!0,showModal:!1,currentUser:null,modalMessage:"",upgrading:!0},e.loadMoreUsres=function(){var t=e.state.numOfUsers;e.setState({numOfUsers:t+5})},e.resetUsersNum=function(){e.state.numOfUsers!==e.defaultUsersPerPage&&e.setState({numOfUsers:e.defaultUsersPerPage})},e.onFilterChange=function(t){t.length&&t[0].length>1?e.setState({filterInput:t,isFiltering:!0}):e.setState({filterInput:t,isFiltering:!1})},e.onDeleteUser=function(t){window.alert("Niestety funkcja usuwania u\u017cytkownik\xf3w nie zosta\u0142a jak na razie aktywowana. W celu usuni\u0119cia u\u017cytkownika skontaktuj si\u0119 z administratorem."),e.setState({isLoading:!1,showModal:!1})},e.onDowngradeUser=function(t){e.setState({isLoading:!0,showModal:!1}),t.isAdmin?e.props.removeAdmin(t.email,t.id):t.isPublisher?e.props.removePublisher(t.email,t.id):e.onDeleteUser()},e.onUpgradeUser=function(t){e.setState({isLoading:!0,showModal:!1}),t.isAdmin||(t.isPublisher?e.props.addAdmin(t.email,t.id):e.props.addPublisher(t.email,t.id))},e.onConfirmUpgradeUser=function(t){var a=e.state.users.find((function(e){return e.id===t})),n="Czy na pewno chcesz mianowa\u0107 ".concat(a.firstName," ").concat(a.lastName," recenzentem?");a.isPublisher&&(n="Czy na pewno chcesz mianowa\u0107 ".concat(a.firstName," ").concat(a.lastName," administratorem?")),e.setState({showModal:!0,currentUser:Object(m.a)({},a),modalMessage:n,upgrading:!0})},e.onConfirmDowngradeUser=function(t){var a=e.state.users.find((function(e){return e.id===t})),n="Czy na pewno chcesz USUN\u0104\u0106 u\u017cytkownika ".concat(a.firstName," ").concat(a.lastName,"?");a.isAdmin?n="Czy na pewno chcesz usun\u0105\u0107 status ADMINISTRATORA u\u017cytkownikowi ".concat(a.firstName," ").concat(a.lastName,"?"):a.isPublisher&&(n="Czy na pewno chcesz usun\u0105\u0107 status recenzenta u\u017cytkownikowi ".concat(a.firstName," ").concat(a.lastName,"?")),e.setState({showModal:!0,currentUser:Object(m.a)({},a),modalMessage:n,upgrading:!1})},e.onCloseModal=function(){e.setState({showModal:!1}),e.setState({currentUser:null})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.ref("users").on("value",(function(t){var a=[],n=t.val();for(var s in n){var i={firstName:n[s].firstName,lastName:n[s].lastName,email:n[s].email,city:n[s].city,phone:n[s].phone,id:s,isPublisher:!0===n[s].isPublisher,isAdmin:!0===n[s].isAdmin};a.push(i)}e.setState({users:a,isLoading:!1})}))}},{key:"componentWillUnmount",value:function(){C.ref("users").off()}},{key:"render",value:function(){var e=this,t=this.state.users.filter((function(t){return t.email!==e.props.myEmail})).filter((function(t){if(!e.state.isFiltering)return!0;e.resetUsersNum();var a=!1;return e.state.filterInput.forEach((function(e){t.firstName.toLowerCase().includes(e.toLowerCase())&&e.length>1&&(a=!0),t.lastName.toLowerCase().includes(e.toLowerCase())&&e.length>1&&(a=!0),t.email.toLowerCase().includes(e.toLowerCase())&&e.length>1&&(a=!0),t.city.toLowerCase().includes(e.toLowerCase())&&e.length>1&&(a=!0)})),a})).slice(0,this.state.numOfUsers).map((function(t){return s.a.createElement("div",{key:t.id,id:t.id,className:"users-box__user"},s.a.createElement("div",{className:"users-box__user-icon-box"},s.a.createElement("div",{className:"users-box__user-icon-container"},t.isAdmin?s.a.createElement(p.e,{className:"users-box__user-icon"}):t.isPublisher?s.a.createElement(F.b,{className:"users-box__user-icon"}):s.a.createElement(q.c,{className:"users-box__user-icon"}))),s.a.createElement("div",{className:"users-box__user-info-box"},s.a.createElement("div",{className:"users-box__user-name"},t.firstName," ",t.lastName),s.a.createElement("div",{className:"users-box__user-info"},s.a.createElement("div",{className:"users-box__user-info-field"},"Email: \u2003",t.email),s.a.createElement("div",{className:"users-box__user-info-field"},"Miasto:\u2003",t.city),s.a.createElement("div",{className:"users-box__user-info-field"},"Status:\u2003",t.isAdmin?"Administrator":t.isPublisher?"Recenzent":"U\u017cytkownik"))),s.a.createElement("div",{className:"users-box__btns"},s.a.createElement("button",{className:"users-box__btn ".concat(t.isAdmin?"users-box__btn--disabled":t.isPublisher?"users-box__btn--premium":"users-box__btn--confirm"),onClick:function(){return e.onConfirmUpgradeUser(t.id)}},s.a.createElement(p.f,{className:"users-box__btn-icon"})),s.a.createElement("button",{className:"users-box__btn users-box__btn--delete",onClick:function(){return e.onConfirmDowngradeUser(t.id)}},t.isAdmin||t.isPublisher?s.a.createElement(F.a,{className:"users-box__btn-icon"}):s.a.createElement(p.c,{className:"users-box__btn-icon"}))))}));return s.a.createElement("div",{className:"users-box"},s.a.createElement(U.a,{isOpen:this.state.showModal,style:Y,contentLabel:"Example Modal",overlayClassName:"modal__overlay",onRequestClose:this.onCloseModal},s.a.createElement("div",{className:"modal__window"},s.a.createElement("h2",{className:"modal__msg modal__msg--black"},this.state.modalMessage),s.a.createElement("div",{className:"modal__btns"},s.a.createElement(f,{type:"short",onClick:function(){return e.state.upgrading?e.onUpgradeUser(e.state.currentUser):e.onDowngradeUser(e.state.currentUser)}},"Tak"),s.a.createElement(f,{types:["delete","short"],onClick:this.onCloseModal},"Anuluj")))),s.a.createElement(h,{placeholder:"Szukaj u\u017cytkownik\xf3w",onChange:this.onFilterChange}),this.state.isLoading?s.a.createElement("div",{className:"u-centered"},s.a.createElement(_,null)):t,s.a.createElement(f,{type:"long",onClick:this.loadMoreUsres,className:this.state.numOfUsers>this.state.users.length?"btn--grey":""},"Za\u0142aduj wi\u0119cej uzytkownik\xf3w"))}}]),a}(n.Component),ee=Object(y.b)((function(e){return{myEmail:e.auth.user?e.auth.user.email:""}}),{addPublisher:function(e,t){return function(a){a({type:"USER_LOADING"}),S.httpsCallable("addPublisherRole")({email:e}).then((function(){C.ref("users/".concat(t)).update({isPublisher:!0}).catch((function(e){a(j(e.message,e.code))}))})).catch((function(e){a(j(e.message,e.code))}))}},removePublisher:function(e,t){return function(a){a({type:"USER_LOADING"}),S.httpsCallable("removePublisherRole")({email:e}).then((function(){C.ref("users/".concat(t)).update({isPublisher:!1}).catch((function(e){a(j(e.message,e.code))}))})).catch((function(e){a(j(e.message,e.code))}))}},addAdmin:function(e,t){return function(a){a({type:"USER_LOADING"}),S.httpsCallable("addAdminRole")({email:e}).then((function(){C.ref("users/".concat(t)).update({isAdmin:!0}).catch((function(e){a(j(e.message,e.code))}))})).catch((function(e){a(j(e.message,e.code))}))}},removeAdmin:function(e,t){return function(a){a({type:"USER_LOADING"}),S.httpsCallable("removeAdminRole")({email:e}).then((function(){C.ref("users/".concat(t)).update({isAdmin:!1}).catch((function(e){a(j(e.message,e.code))}))})).catch((function(e){a(j(e.message,e.code))}))}},deleteUser:L})($),te=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={users:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.isAdmin||this.props.history.push("/")}},{key:"render",value:function(){return s.a.createElement("div",{className:"admin-dash"},s.a.createElement("h1",{className:"heading-primary"},"Zarz\u0105dzaj u\u017cytkownikami"),s.a.createElement(ee,null))}}]),a}(n.Component),ae=Object(y.b)((function(e){return{isAdmin:e.auth.isAdmin}}),{})(te),ne={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},se=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={passFirst:"",passSecond:"",showModal:!1},e.onInputChange=function(t){t.target&&e.setState(Object(g.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault(),e.props.changePassword(e.props.user,e.state.passFirst,e.state.passSecond,(function(){return e.setState({showModal:!0})}))},e.redirect=function(){e.props.history.push("/")},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.props.user||this.props.history.push("/")}},{key:"render",value:function(){var e=s.a.createElement("div",{className:"u-centered"},s.a.createElement(_,null));return this.props.isLoading||(e=this.props.errorMsg.length?s.a.createElement("h3",{className:"login__msg"},this.props.errorMsg):null),s.a.createElement("form",{className:"login",onSubmit:this.onSubmit},s.a.createElement("h2",{className:"login__title"},"Zmie\u0144 has\u0142o"),s.a.createElement(z,{type:"password",id:"passFirst",placeholder:"Nowe has\u0142o",onChange:this.onInputChange,label:"Nowe has\u0142o:",icon:s.a.createElement(q.b,{className:"login__icon"}),required:!0}),s.a.createElement(z,{type:"password",id:"passSecond",placeholder:"Nowe has\u0142o",onChange:this.onInputChange,label:"Powt\xf3rz nowe has\u0142o:",icon:s.a.createElement(q.b,{className:"login__icon"}),required:!0}),e,s.a.createElement("button",{type:"submit",className:"btn btn--full"},"Zmie\u0144"),s.a.createElement(U.a,{isOpen:this.state.showModal,style:ne,contentLabel:"Example Modal",overlayClassName:"modal__overlay",onRequestClose:this.redirect}," ",s.a.createElement("div",{className:"modal__window"},s.a.createElement("h2",null,"Pomy\u015blnie zmieniono has\u0142o!"),s.a.createElement("div",{className:"u-centered"},s.a.createElement(f,{types:["confirm","short"],onClick:this.redirect},"Wr\xf3\u0107 do strony g\u0142\xf3wnej")))))}}]),a}(n.Component),ie=Object(y.b)((function(e){return{user:e.auth.user,errorMsg:e.error.msg,isLoading:e.auth.isLoading}}),{changePassword:function(e,t,a,n){return function(s){return s({type:"USER_LOADING"}),e?t!==a?(s(j("Has\u0142a nie s\u0105 takie same. Wprowad\u017a to samo has\u0142o w oba pola.",400)),void s({type:"UPDATED_PASSWORD"})):void(e&&e.updatePassword(t).then((function(){n(),s({type:"UPDATED_PASSWORD"})})).catch((function(e){s({type:"UPDATED_PASSWORD"}),s(j(e.message,e.code))}))):(s(j("U\u017cytkownik nie jest zalogowany",400)),void s({type:"UPDATED_PASSWORD"}))}}})(se),oe=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.onAuthStateChanged((function(t){e.props.loadUser(t)}))}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("main",{className:"main"},s.a.createElement("section",{className:"questions"},s.a.createElement(Z,null),s.a.createElement("div",{className:"content-container"},s.a.createElement(R.c,null,s.a.createElement(R.a,{path:"/login",component:x}),s.a.createElement(R.a,{path:"/account",component:X}),s.a.createElement(R.a,{path:"/admin",component:ae}),s.a.createElement(R.a,{path:"/change",component:ie}),s.a.createElement(R.a,{path:"/prywatne",render:function(e){return s.a.createElement(M,Object.assign({},e,{type:"private"}))}}),s.a.createElement(R.a,{path:"/recenzje",render:function(e){return s.a.createElement(M,Object.assign({},e,{type:"review"}))}}),s.a.createElement(R.a,{exact:!0,path:"/",component:M}),s.a.createElement(R.a,{path:"/pytania",component:M}),s.a.createElement(R.a,{path:"/index.html",component:M}),s.a.createElement(R.a,{component:M}))))),s.a.createElement(P,null))}}]),a}(n.Component),re=Object(y.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{loadUser:function(e){return function(e){e({type:"USER_LOADING"});var t=O.currentUser;t?(t.getIdTokenResult().then((function(t){t.claims.admin?e({type:"ADMIN_LOADED"}):t.claims.publisher&&e({type:"PUBLISHER_LOADED"})})).catch((function(t){e({type:"PUBLISHER_FAIL"})})),C.ref("users/".concat(t.uid)).once("value").then((function(e){return e.val()})).then((function(a){if(!a)throw new Error("User is not defined in database");t.firstName=a.firstName||"brak informacji",t.lastName=a.lastName||"brak informacji",t.city=a.city||"brak informacji",e({type:"USER_LOADED",payload:t})})).catch((function(a){e(j(a.message,a.code)),t.firstName="brak informacji",t.lastName="brak informacji",t.city="brak informacji",e({type:"USER_LOADED",payload:t})}))):e({type:"AUTH_ERROR"})}}})(oe),ce=a(21),le=a(46),ue={isAuthenticated:null,isLoading:!1,user:null,isAdmin:!1,isPublisher:!1},me=a(47),de={items:[],item:{},isFetching:!1},pe={msg:{},status:null,id:null},he=Object(ce.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(m.a)({},e,{isLoading:!0});case"USER_LOADED":return Object(m.a)({},e,{isLoading:!1,isAuthenticated:!0,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return Object(m.a)({},e,{isLoading:!1,isAuthenticated:!0,user:t.payload});case"LOGIN_FAIL":case"AUTH_ERROR":case"REGISTER_FAIL":case"LOGOUT_SUCCESS":return Object(m.a)({},e,{user:null,isLoading:!1,isAuthenticated:!1,isAdmin:!1,isPublisher:!1});case"ADMIN_LOADED":return Object(m.a)({},e,{isAdmin:!0,isPublisher:!0,isLoading:!1});case"PUBLISHER_LOADED":return Object(m.a)({},e,{isAdmin:!1,isPublisher:!0,isLoading:!1});case"ADMIN_FAIL":return Object(m.a)({},e,{isAdmin:!1,isLoading:!1});case"PUBLISHER_FAIL":return Object(m.a)({},e,{isPublisher:!1,isAdmin:!1,isLoading:!1});case"UPDATED_PASSWORD":return Object(m.a)({},e,{isLoading:!1});case"USER_UPDATED":var a=Object(m.a)({},e.user,{},t.payload);return Object(m.a)({},e,{user:a});default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,a=Object(me.a)(e.items);switch(t.type){case"QUESTIONS_LOADING":return Object(m.a)({},e,{isFetching:!0});case"FETCH_QUESTIONS":return Object(m.a)({},e,{items:t.payload,isFetching:!1});case"NEW_PRIVATE_QUESTION":return a.push(t.payload),Object(m.a)({},e,{items:a,item:t.payload,isFetching:!1});case"NEW_PUBLIC_QUESTION":return t.payload?(a.push(t.payload),Object(m.a)({},e,{items:a,item:t.payload,isFetching:!1})):e;case"DELETE_QUESTION":return a=a.filter((function(e){return e.id!==t.payload})),Object(m.a)({},e,{items:a,isFetching:!1});case"UPDATE_QUESTION":var n=a.findIndex((function(e){return e.id===t.payload.id}));return a[n]=Object(m.a)({},a[n],{},t.payload.question),Object(m.a)({},e,{items:a,item:a[n],isFetching:!1});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case"CLEAR_ERRORS":return Object(m.a)({},pe);default:return Object(m.a)({},e)}}}),fe=[le.a],Ee=Object(ce.e)(he,{},Object(ce.d)(ce.a.apply(void 0,fe)));var _e=function(){return s.a.createElement(y.a,{store:Ee},s.a.createElement(W.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(re,null))))};a(75);o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(_e,null)),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.ff914dbc.chunk.js.map